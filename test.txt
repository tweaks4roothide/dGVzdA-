 sudo nixos-rebuild switch --flake ~/.config/nixos-flake#my-system --show-trace
error:
       … while calling the 'seq' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:360:18:
          359|         options = checked options;
          360|         config = checked (removeAttrs config [ "_module" ]);
             |                  ^
          361|         _module = checked (config._module);

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:296:9:
          295|       checkUnmatched =
          296|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |         ^
          297|           let

       … in the left operand of the AND (&&) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:296:72:
          295|       checkUnmatched =
          296|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |                                                                        ^
          297|           let

       … in the left operand of the AND (&&) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:296:33:
          295|       checkUnmatched =
          296|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |                                 ^
          297|           let

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:287:9:
          286|         in
          287|         if declaredConfig._module.freeformType == null then
             |         ^
          288|           declaredConfig

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:274:28:
          273|           # For definitions that have an associated option
          274|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                            ^
          275|

       … while calling 'mapAttrsRecursiveCond'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/attrsets.nix:1177:14:
         1176|   mapAttrsRecursiveCond =
         1177|     cond: f: set:
             |              ^
         1178|     let

       … while calling the 'mapAttrs' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/attrsets.nix:1186:5:
         1185|     in
         1186|     recurse [ ] set;
             |     ^
         1187|

       … while evaluating the attribute 'matchedOptions'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:858:15:
          857|     {
          858|       inherit matchedOptions;
             |               ^
          859|

       … while calling the 'mapAttrs' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:848:24:
          847|
          848|       matchedOptions = mapAttrs (n: v: v.matchedOptions) resultsByName;
             |                        ^
          849|

       … while calling the 'mapAttrs' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:796:23:
          795|
          796|       resultsByName = mapAttrs (
             |                       ^
          797|         name: decls:

       … while calling the 'zipAttrsWith' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:712:21:
          711|       # an attrset 'name' => list of submodules that declare ‘name’.
          712|       declsByName = zipAttrsWith (n: v: v) (
             |                     ^
          713|         map (

       … while calling the 'map' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:713:9:
          712|       declsByName = zipAttrsWith (n: v: v) (
          713|         map (
             |         ^
          714|           module:

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:266:30:
          265|         in
          266|         mergeModules prefix (reverseList collected);
             |                              ^
          267|

       … while calling 'reverseList'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/lists.nix:1103:5:
         1102|   reverseList =
         1103|     xs:
             |     ^
         1104|     let

       … while calling the 'genList' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/lists.nix:1107:5:
         1106|     in
         1107|     genList (n: elemAt xs (l - n - 1)) l;
             |     ^
         1108|

       … while evaluating the second argument passed to builtins.genList

       … while calling the 'length' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/lists.nix:1105:11:
         1104|     let
         1105|       l = length xs;
             |           ^
         1106|     in

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:251:13:
          250|           collected =
          251|             collectModules class (specialArgs.modulesPath or "") (regularModules ++ [ internalModule ])
             |             ^
          252|               (

       … while calling anonymous lambda
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:524:34:
          523|     in
          524|     modulesPath: initialModules: args:
             |                                  ^
          525|     filterModules modulesPath (collectStructuredModules unknownModule "" initialModules args);

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:525:5:
          524|     modulesPath: initialModules: args:
          525|     filterModules modulesPath (collectStructuredModules unknownModule "" initialModules args);
             |     ^
          526|

       … while calling 'filterModules'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:494:9:
          493|         modulesPath:
          494|         { disabled, modules }:
             |         ^
          495|         let

       … while calling the 'map' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:518:9:
          517|         in
          518|         map (attrs: attrs.module) (genericClosure {
             |         ^
          519|           startSet = keyFilter modules;

       … while calling the 'genericClosure' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:518:36:
          517|         in
          518|         map (attrs: attrs.module) (genericClosure {
             |                                    ^
          519|           startSet = keyFilter modules;

       … while calling the 'filter' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:519:22:
          518|         map (attrs: attrs.module) (genericClosure {
          519|           startSet = keyFilter modules;
             |                      ^
          520|           operator = attrs: keyFilter attrs.modules;

       … while calling anonymous lambda
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:516:31:
          515|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          516|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);
             |                               ^
          517|         in

       … in the argument of the not operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:516:39:
          515|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          516|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);
             |                                       ^
          517|         in

       … while calling the 'elem' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:516:39:
          515|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          516|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);
             |                                       ^
          517|         in

       … while calling the 'concatMap' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:515:26:
          514|
          515|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
             |                          ^
          516|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);

       … while calling the 'concatLists' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:455:24:
          454|           collectResults = modules: {
          455|             disabled = concatLists (catAttrs "disabled" modules);
             |                        ^
          456|             inherit modules;

       … while evaluating the attribute 'disabled'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:455:13:
          454|           collectResults = modules: {
          455|             disabled = concatLists (catAttrs "disabled" modules);
             |             ^
          456|             inherit modules;

       … while calling the 'concatLists' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:455:24:
          454|           collectResults = modules: {
          455|             disabled = concatLists (catAttrs "disabled" modules);
             |                        ^
          456|             inherit modules;

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:473:19:
          472|                 (
          473|                   if module.disabledModules != [ ] then
             |                   ^
          474|                     [

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:464:24:
          463|             let
          464|               module = checkModule (loadModule args parentFile "${parentKey}:anon-${toString n}" x);
             |                        ^
          465|               collectedImports = collectStructuredModules module._file module.key module.imports args;

       … while calling anonymous lambda
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:412:11:
          411|         if class != null then
          412|           m:
             |           ^
          413|           if m._class == null || m._class == class then

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:413:11:
          412|           m:
          413|           if m._class == null || m._class == class then
             |           ^
          414|             m

       … in the left operand of the OR (||) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:413:31:
          412|           m:
          413|           if m._class == null || m._class == class then
             |                               ^
          414|             m

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:464:37:
          463|             let
          464|               module = checkModule (loadModule args parentFile "${parentKey}:anon-${toString n}" x);
             |                                     ^
          465|               collectedImports = collectStructuredModules module._file module.key module.imports args;

       … while calling 'loadModule'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:377:42:
          376|       loadModule =
          377|         args: fallbackFile: fallbackKey: m:
             |                                          ^
          378|         if isFunction m then

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:406:11:
          405|         else
          406|           unifyModuleSyntax (toString m) (toString m) (
             |           ^
          407|             applyModuleArgsIfFunction (toString m) (import m) args

       … while calling 'unifyModuleSyntax'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:564:16:
          563|   unifyModuleSyntax =
          564|     file: key: m:
             |                ^
          565|     let

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:585:5:
          584|     in
          585|     if m ? config || m ? options then
             |     ^
          586|       let

       … in the left operand of the OR (||) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:585:19:
          584|     in
          585|     if m ? config || m ? options then
             |                   ^
          586|       let

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:407:13:
          406|           unifyModuleSyntax (toString m) (toString m) (
          407|             applyModuleArgsIfFunction (toString m) (import m) args
             |             ^
          408|           );

       … while calling 'applyModuleArgsIfFunction'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:634:13:
          633|   applyModuleArgsIfFunction =
          634|     key: f: args@{ config, ... }: if isFunction f then applyModuleArgs key f args else f;
             |             ^
          635|

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:634:35:
          633|   applyModuleArgsIfFunction =
          634|     key: f: args@{ config, ... }: if isFunction f then applyModuleArgs key f args else f;
             |                                   ^
          635|

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:634:38:
          633|   applyModuleArgsIfFunction =
          634|     key: f: args@{ config, ... }: if isFunction f then applyModuleArgs key f args else f;
             |                                      ^
          635|

       … while calling 'isFunction'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/trivial.nix:1023:16:
         1022|   */
         1023|   isFunction = f: builtins.isFunction f || (f ? __functor && isFunction (f.__functor f));
             |                ^
         1024|

       … in the left operand of the OR (||) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/trivial.nix:1023:41:
         1022|   */
         1023|   isFunction = f: builtins.isFunction f || (f ? __functor && isFunction (f.__functor f));
             |                                         ^
         1024|

       … while calling the 'isFunction' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/trivial.nix:1023:19:
         1022|   */
         1023|   isFunction = f: builtins.isFunction f || (f ? __functor && isFunction (f.__functor f));
             |                   ^
         1024|

       … while calling the 'import' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:407:53:
          406|           unifyModuleSyntax (toString m) (toString m) (
          407|             applyModuleArgsIfFunction (toString m) (import m) args
             |                                                     ^
          408|           );

       error: undefined variable 'home-manager'
       at /nix/store/ywsypxsa0fh3bkgwsflg71b4xq5zaxl6-source/configuration.nix:5:3:
            4|   imports = [
            5|   home-manager.nixosModules.home-manager
             |   ^
            6|   ];
warning: could not build a newer version of nixos-rebuild, using current version
building the system configuration...
error:
       … while calling the 'seq' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:360:18:
          359|         options = checked options;
          360|         config = checked (removeAttrs config [ "_module" ]);
             |                  ^
          361|         _module = checked (config._module);

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:296:9:
          295|       checkUnmatched =
          296|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |         ^
          297|           let

       … in the left operand of the AND (&&) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:296:72:
          295|       checkUnmatched =
          296|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |                                                                        ^
          297|           let

       … in the left operand of the AND (&&) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:296:33:
          295|       checkUnmatched =
          296|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |                                 ^
          297|           let

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:287:9:
          286|         in
          287|         if declaredConfig._module.freeformType == null then
             |         ^
          288|           declaredConfig

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:274:28:
          273|           # For definitions that have an associated option
          274|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                            ^
          275|

       … while calling 'mapAttrsRecursiveCond'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/attrsets.nix:1177:14:
         1176|   mapAttrsRecursiveCond =
         1177|     cond: f: set:
             |              ^
         1178|     let

       … while calling the 'mapAttrs' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/attrsets.nix:1186:5:
         1185|     in
         1186|     recurse [ ] set;
             |     ^
         1187|

       … while evaluating the attribute 'matchedOptions'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:858:15:
          857|     {
          858|       inherit matchedOptions;
             |               ^
          859|

       … while calling the 'mapAttrs' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:848:24:
          847|
          848|       matchedOptions = mapAttrs (n: v: v.matchedOptions) resultsByName;
             |                        ^
          849|

       … while calling the 'mapAttrs' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:796:23:
          795|
          796|       resultsByName = mapAttrs (
             |                       ^
          797|         name: decls:

       … while calling the 'zipAttrsWith' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:712:21:
          711|       # an attrset 'name' => list of submodules that declare ‘name’.
          712|       declsByName = zipAttrsWith (n: v: v) (
             |                     ^
          713|         map (

       … while calling the 'map' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:713:9:
          712|       declsByName = zipAttrsWith (n: v: v) (
          713|         map (
             |         ^
          714|           module:

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:266:30:
          265|         in
          266|         mergeModules prefix (reverseList collected);
             |                              ^
          267|

       … while calling 'reverseList'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/lists.nix:1103:5:
         1102|   reverseList =
         1103|     xs:
             |     ^
         1104|     let

       … while calling the 'genList' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/lists.nix:1107:5:
         1106|     in
         1107|     genList (n: elemAt xs (l - n - 1)) l;
             |     ^
         1108|

       … while evaluating the second argument passed to builtins.genList

       … while calling the 'length' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/lists.nix:1105:11:
         1104|     let
         1105|       l = length xs;
             |           ^
         1106|     in

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:251:13:
          250|           collected =
          251|             collectModules class (specialArgs.modulesPath or "") (regularModules ++ [ internalModule ])
             |             ^
          252|               (

       … while calling anonymous lambda
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:524:34:
          523|     in
          524|     modulesPath: initialModules: args:
             |                                  ^
          525|     filterModules modulesPath (collectStructuredModules unknownModule "" initialModules args);

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:525:5:
          524|     modulesPath: initialModules: args:
          525|     filterModules modulesPath (collectStructuredModules unknownModule "" initialModules args);
             |     ^
          526|

       … while calling 'filterModules'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:494:9:
          493|         modulesPath:
          494|         { disabled, modules }:
             |         ^
          495|         let

       … while calling the 'map' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:518:9:
          517|         in
          518|         map (attrs: attrs.module) (genericClosure {
             |         ^
          519|           startSet = keyFilter modules;

       … while calling the 'genericClosure' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:518:36:
          517|         in
          518|         map (attrs: attrs.module) (genericClosure {
             |                                    ^
          519|           startSet = keyFilter modules;

       … while calling the 'filter' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:519:22:
          518|         map (attrs: attrs.module) (genericClosure {
          519|           startSet = keyFilter modules;
             |                      ^
          520|           operator = attrs: keyFilter attrs.modules;

       … while calling anonymous lambda
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:516:31:
          515|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          516|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);
             |                               ^
          517|         in

       … in the argument of the not operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:516:39:
          515|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          516|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);
             |                                       ^
          517|         in

       … while calling the 'elem' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:516:39:
          515|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
          516|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);
             |                                       ^
          517|         in

       … while calling the 'concatMap' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:515:26:
          514|
          515|           disabledKeys = concatMap ({ file, disabled }: map (moduleKey file) disabled) disabled;
             |                          ^
          516|           keyFilter = filter (attrs: !elem attrs.key disabledKeys);

       … while calling the 'concatLists' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:455:24:
          454|           collectResults = modules: {
          455|             disabled = concatLists (catAttrs "disabled" modules);
             |                        ^
          456|             inherit modules;

       … while evaluating the attribute 'disabled'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:455:13:
          454|           collectResults = modules: {
          455|             disabled = concatLists (catAttrs "disabled" modules);
             |             ^
          456|             inherit modules;

       … while calling the 'concatLists' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:455:24:
          454|           collectResults = modules: {
          455|             disabled = concatLists (catAttrs "disabled" modules);
             |                        ^
          456|             inherit modules;

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:473:19:
          472|                 (
          473|                   if module.disabledModules != [ ] then
             |                   ^
          474|                     [

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:464:24:
          463|             let
          464|               module = checkModule (loadModule args parentFile "${parentKey}:anon-${toString n}" x);
             |                        ^
          465|               collectedImports = collectStructuredModules module._file module.key module.imports args;

       … while calling anonymous lambda
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:412:11:
          411|         if class != null then
          412|           m:
             |           ^
          413|           if m._class == null || m._class == class then

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:413:11:
          412|           m:
          413|           if m._class == null || m._class == class then
             |           ^
          414|             m

       … in the left operand of the OR (||) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:413:31:
          412|           m:
          413|           if m._class == null || m._class == class then
             |                               ^
          414|             m

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:464:37:
          463|             let
          464|               module = checkModule (loadModule args parentFile "${parentKey}:anon-${toString n}" x);
             |                                     ^
          465|               collectedImports = collectStructuredModules module._file module.key module.imports args;

       … while calling 'loadModule'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:377:42:
          376|       loadModule =
          377|         args: fallbackFile: fallbackKey: m:
             |                                          ^
          378|         if isFunction m then

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:406:11:
          405|         else
          406|           unifyModuleSyntax (toString m) (toString m) (
             |           ^
          407|             applyModuleArgsIfFunction (toString m) (import m) args

       … while calling 'unifyModuleSyntax'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:564:16:
          563|   unifyModuleSyntax =
          564|     file: key: m:
             |                ^
          565|     let

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:585:5:
          584|     in
          585|     if m ? config || m ? options then
             |     ^
          586|       let

       … in the left operand of the OR (||) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:585:19:
          584|     in
          585|     if m ? config || m ? options then
             |                   ^
          586|       let

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:407:13:
          406|           unifyModuleSyntax (toString m) (toString m) (
          407|             applyModuleArgsIfFunction (toString m) (import m) args
             |             ^
          408|           );

       … while calling 'applyModuleArgsIfFunction'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:634:13:
          633|   applyModuleArgsIfFunction =
          634|     key: f: args@{ config, ... }: if isFunction f then applyModuleArgs key f args else f;
             |             ^
          635|

       … while evaluating a branch condition
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:634:35:
          633|   applyModuleArgsIfFunction =
          634|     key: f: args@{ config, ... }: if isFunction f then applyModuleArgs key f args else f;
             |                                   ^
          635|

       … from call site
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:634:38:
          633|   applyModuleArgsIfFunction =
          634|     key: f: args@{ config, ... }: if isFunction f then applyModuleArgs key f args else f;
             |                                      ^
          635|

       … while calling 'isFunction'
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/trivial.nix:1023:16:
         1022|   */
         1023|   isFunction = f: builtins.isFunction f || (f ? __functor && isFunction (f.__functor f));
             |                ^
         1024|

       … in the left operand of the OR (||) operator
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/trivial.nix:1023:41:
         1022|   */
         1023|   isFunction = f: builtins.isFunction f || (f ? __functor && isFunction (f.__functor f));
             |                                         ^
         1024|

       … while calling the 'isFunction' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/trivial.nix:1023:19:
         1022|   */
         1023|   isFunction = f: builtins.isFunction f || (f ? __functor && isFunction (f.__functor f));
             |                   ^
         1024|

       … while calling the 'import' builtin
         at /nix/store/gi1bdb5fzaqn0qhhhqwr3v46p6zndvsh-source/lib/modules.nix:407:53:
          406|           unifyModuleSyntax (toString m) (toString m) (
          407|             applyModuleArgsIfFunction (toString m) (import m) args
             |                                                     ^
          408|           );

       error: undefined variable 'home-manager'
       at /nix/store/ywsypxsa0fh3bkgwsflg71b4xq5zaxl6-source/configuration.nix:5:3:
            4|   imports = [
            5|   home-manager.nixosModules.home-manager
             |   ^
            6|   ];
Command '['nix', '--extra-experimental-features', 'nix-command flakes', 'build', '--print-out-paths', '/home/faraj/.config/nixos-flake#nixosConfigurations."my-system".config.system.build.toplevel', '--show-trace', '--no-link']' returned non-zero exit status 1.

